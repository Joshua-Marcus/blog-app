"use strict";(self.webpackChunkblog_app=self.webpackChunkblog_app||[]).push([[661],{1661:(ne,et,a)=>{a.r(et),a.d(et,{PostsModule:()=>M});var f=a(6895),c=a(433),h=a(8456),e=a(8274);class I{}I.\u0275fac=function(t){return new(t||I)},I.\u0275mod=e.oAB({type:I}),I.\u0275inj=e.cJS({imports:[c.u5,c.UX,f.ez,h.Bz]});var E=a(7579),Y=a(5698),U=a(4482),S=a(5403),L=a(8421),ot=a(5032);function O(n){return(0,U.e)((t,o)=>{(0,L.Xf)(n).subscribe((0,S.x)(o,()=>o.complete(),ot.Z)),!o.closed&&t.subscribe(o)})}var nt=a(4408),st=a(7565);const it=new st.v(nt.o),yt=it;var B=a(9751),vt=a(3532);function xt(n,t=it){return function gt(n){return(0,U.e)((t,o)=>{let s=!1,i=null,r=null,l=!1;const d=()=>{if(r?.unsubscribe(),r=null,s){s=!1;const p=i;i=null,o.next(p)}l&&o.complete()},u=()=>{r=null,l&&o.complete()};t.subscribe((0,S.x)(o,p=>{s=!0,i=p,r||(0,L.Xf)(n(p)).subscribe(r=(0,S.x)(o,d,u))},()=>{l=!0,(!s||!r||r.closed)&&o.complete()}))})}(()=>function bt(n=0,t,o=yt){let s=-1;return null!=t&&((0,vt.K)(t)?o=t:s=t),new B.y(i=>{let r=function Ct(n){return n instanceof Date&&!isNaN(n)}(n)?+n-o.now():n;r<0&&(r=0);let l=0;return o.schedule(function(){i.closed||(i.next(l++),0<=s?this.schedule(void 0,s):i.complete())},r)})}(n,t))}class w{constructor(){this.internalControl=new c.NI,this.autoCompleteText="no",this.disabled=!1,this.name="default",this.type="text",this.$nginit=new E.x,this.$ngdestroy=new E.x,this._destroyed=new E.x,this.isRequired=!1,this.propagateChange=t=>{},this.onTouched=()=>{},this.$nginit.pipe((0,Y.q)(1)).subscribe(()=>this._init()),this.$ngdestroy.pipe((0,Y.q)(1)).subscribe(()=>this._destroy())}ngOnInit(){this.$nginit.next()}ngOnDestroy(){this.$ngdestroy.next()}_init(){if(this._destroyed.next(),this.allowAutoComplete?(this.autoCompleteObscureName=this.formControlName||this.name,this.autoCompleteText="yes"):this.autoCompleteObscureName=function Tt(n){let t="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=o.length;for(let i=0;i<n;i++)t+=o.charAt(Math.floor(Math.random()*s));return t}(8),this.internalControl.valueChanges.pipe(O(this._destroyed)).pipe(xt(100)).subscribe(()=>{this._value=this.internalControl.value,this.onChange(this._value),this.onTouched()}),!this.label){const t=function Pt(n){return n.replace(/([A-Z])/g," $1").trim().replace(/_/g," ").split(" ").map(s=>s.charAt(0).toUpperCase()+s.substring(1).toLowerCase()).join(" ")}(this.formControlName+"");this.label=t}}_destroy(){this._destroyed.next()}get value(){return this._value}set value(t){this._value=t,this.internalControl.setValue(t)}writeValue(t){void 0!==t&&(this.value=t)}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,setTimeout(()=>{t?this.internalControl.disable():this.internalControl.enable()})}validate(t){return this.internalControl.setValidators(t.validator),this.validationError?{validationError:{valid:!1}}:null}onChange(t){this.validationError="",this.propagateChange(this.validationError?this.value:t)}generateErrorMessage(){let t="";const o=this.internalControl.errors;return(null!=o||null!=o)&&Object.entries(o).forEach(([s,i])=>{"pattern"===s?t+="Please input correct email format. ":"required"===s?t+="This field is required. ":"minlength"===s?t+=`The minimum length for this field is ${o.minlength.requiredLength} characters.`:"maxlength"===s?t+=`The maximum length for this field is ${o.maxlength.requiredLength} characters.`:i.message&&(t+=i.message)}),t}}function It(n,t){if(1&n&&(e.TgZ(0,"div",4)(1,"div"),e._uU(2),e.qZA()()),2&n){const o=e.oxw();e.xp6(2),e.Oqu(o.generateErrorMessage())}}w.\u0275fac=function(t){return new(t||w)},w.\u0275dir=e.lG2({type:w,inputs:{allowAutoComplete:"allowAutoComplete",formControlName:"formControlName",placeholder:"placeholder",label:"label",name:"name",type:"type"}});class y extends w{errorBorder(){return!this.internalControl.valid&&this.internalControl.touched&&this.internalControl.dirty}}y.\u0275fac=function(){let n;return function(o){return(n||(n=e.n5z(y)))(o||y)}}(),y.\u0275cmp=e.Xpm({type:y,selectors:[["form-text"]],inputs:{maxlength:"maxlength",default:"default"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>y),multi:!0},{provide:c.Cf,useExisting:(0,e.Gpc)(()=>y),multi:!0}]),e.qOj],decls:5,vars:13,consts:[[1,"block","text-sm","font-medium","text-gray-700",3,"for"],[1,"mt-1"],["required","",1,"appearance-none","block","w-full","px-3","py-2","border","rounded-md","shadow-sm","placeholder-gray-400","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm",3,"name","id","type","autocomplete","placeholder","formControl","maxlength","value"],["class","alert text-xs text-red-600 mt-1.5",4,"ngIf"],[1,"alert","text-xs","text-red-600","mt-1.5"]],template:function(t,o){1&t&&(e.TgZ(0,"label",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"input",2),e.YNc(4,It,3,1,"div",3),e.qZA()),2&t&&(e.Q6J("for",o.label),e.xp6(1),e.hij(" ",o.label," "),e.xp6(2),e.Tol(o.errorBorder()?"border-red-300":"border-gray-300"),e.Q6J("name",o.autoCompleteObscureName)("id",o.autoCompleteObscureName)("type",o.type)("autocomplete",o.autoCompleteText)("placeholder",o.placeholder)("formControl",o.internalControl)("maxlength",o.maxlength)("value",o.default),e.xp6(1),e.Q6J("ngIf",!o.internalControl.valid&&o.internalControl.touched&&o.internalControl.dirty))},dependencies:[c.Fj,c.JJ,c.Q7,c.nD,c.oH,f.O5],encapsulation:2});class g extends w{}g.\u0275fac=function(){let n;return function(o){return(n||(n=e.n5z(g)))(o||g)}}(),g.\u0275cmp=e.Xpm({type:g,selectors:[["form-textarea"]],inputs:{rows:"rows"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>g),multi:!0},{provide:c.Cf,useExisting:(0,e.Gpc)(()=>g),multi:!0}]),e.qOj],decls:4,vars:8,consts:[[1,"block","text-sm","font-medium","text-gray-700",3,"for"],[1,"mt-1"],["required","",1,"appearance-none","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","placeholder-gray-400","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm",3,"name","id","autocomplete","placeholder","formControl","rows"]],template:function(t,o){1&t&&(e.TgZ(0,"label",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"textarea",2),e.qZA()),2&t&&(e.Q6J("for",o.label),e.xp6(1),e.hij(" ",o.label," "),e.xp6(2),e.Q6J("name",o.autoCompleteObscureName)("id",o.autoCompleteObscureName)("autocomplete",o.autoCompleteText)("placeholder",o.placeholder)("formControl",o.internalControl)("rows",o.rows))},dependencies:[c.Fj,c.JJ,c.Q7,c.oH],encapsulation:2});class F{}function rt(n,t,o,s,i,r,l){try{var d=n[r](l),u=d.value}catch(p){return void o(p)}d.done?t(u):Promise.resolve(u).then(s,i)}function Z(n){return function(){var t=this,o=arguments;return new Promise(function(s,i){var r=n.apply(t,o);function l(u){rt(r,s,i,l,d,"next",u)}function d(u){rt(r,s,i,l,d,"throw",u)}l(void 0)})}}F.\u0275fac=function(t){return new(t||F)},F.\u0275mod=e.oAB({type:F}),F.\u0275inj=e.cJS({imports:[c.u5,c.UX,f.ez,h.Bz]});var G=a(3900),k=a(9646),St=a(6805),wt=a(930);function H(n,t){const o="object"==typeof t;return new Promise((s,i)=>{const r=new wt.Hp({next:l=>{s(l),r.unsubscribe()},error:i,complete:()=>{o?s(t.defaultValue):i(new St.K)}});n.subscribe(r)})}var m=a(3078);class C extends m.mm{constructor(){super(...arguments),this.document=m.Ps`
    mutation ($input: CreatePostInput!) {
      createPost(input: $input) {
        id
        title
        body
      }
    }
  `}}C.\u0275fac=function(){let n;return function(o){return(n||(n=e.n5z(C)))(o||C)}}(),C.\u0275prov=e.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"});class b extends m.mm{constructor(){super(...arguments),this.document=m.Ps`
    mutation ($id: ID!) {
      deletePost(id: $id)
    }
  `}}b.\u0275fac=function(){let n;return function(o){return(n||(n=e.n5z(b)))(o||b)}}(),b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"});class x extends m.AE{constructor(){super(...arguments),this.document=m.Ps`
    query Post($id: ID!) {
      post(id: $id) {
        id
        title
        body
      }
    }
  `}}x.\u0275fac=function(){let n;return function(o){return(n||(n=e.n5z(x)))(o||x)}}(),x.\u0275prov=e.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"});class T extends m.AE{constructor(){super(...arguments),this.document=m.Ps`
    query Posts($options: PageQueryOptions) {
      posts(options: $options) {
        data {
          id
          title
          body
        }
      }
    }
  `}}T.\u0275fac=function(){let n;return function(o){return(n||(n=e.n5z(T)))(o||T)}}(),T.\u0275prov=e.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"});class P extends m.mm{constructor(){super(...arguments),this.document=m.Ps`
    mutation ($id: ID!, $input: UpdatePostInput!) {
      updatePost(id: $id, input: $input) {
        id
        title
        body
      }
    }
  `}}P.\u0275fac=function(){let n;return function(o){return(n||(n=e.n5z(P)))(o||P)}}(),P.\u0275prov=e.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"});var X=a(1864);class A{constructor(t,o){this.fb=t,this.router=o,this.saveClicked=new e.vpe}ngOnInit(){var t=this;return Z(function*(){const o=t.initialModel;if(!o)throw new Error('Must set "initialModel"');t.makeForm(o)})()}navigateBack(){this.router.navigate(["/"])}makeForm(t){this.postFormGroup=this.fb.group({title:new c.NI(null,c.kI.required),body:new c.NI(null,c.kI.required)}),this.postFormGroup.patchValue(t)}onSubmitForm(){var t=this;return Z(function*(){console.log("OnClickSubmit",t.postFormGroup.valid),t.postFormGroup.valid?t.saveClicked.emit(t.postFormGroup.value):console.log("Invalid Form")})()}}function Ft(n,t){if(1&n){const o=e.EpF();e.TgZ(0,"posts-form",4),e.NdJ("saveClicked",function(i){e.CHM(o);const r=e.oxw();return e.KtG(r.onSubmit(i))}),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("initialModel",o.post)}}A.\u0275fac=function(t){return new(t||A)(e.Y36(c.qu),e.Y36(h.F0))},A.\u0275cmp=e.Xpm({type:A,selectors:[["posts-form"]],inputs:{initialModel:"initialModel"},outputs:{saveClicked:"saveClicked"},decls:10,vars:2,consts:[[1,"space-y-6",3,"formGroup","submit"],["formControlName","title","name","title","placeholder","Input the title of your post","label","Title"],["formControlName","body","name","body","placeholder","Input the body content of your post","label","Body",3,"rows"],[1,"flex","justify-end","space-x-3"],["type","button",1,"default-btn",3,"click"],["type","submit",1,"accent-btn"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return o.onSubmitForm()}),e.TgZ(1,"div"),e._UZ(2,"form-text",1),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"form-textarea",2),e.qZA(),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return o.navigateBack()}),e._uU(7," Cancel "),e.qZA(),e.TgZ(8,"button",5),e._uU(9,"Submit"),e.qZA()()()),2&t&&(e.Q6J("formGroup",o.postFormGroup),e.xp6(4),e.Q6J("rows",10))},dependencies:[c._Y,c.JJ,c.JL,c.sg,c.u,y,g],encapsulation:2});class j{constructor(t,o,s,i){this.route=t,this.router=o,this.createMutation=s,this.t=i}ngOnInit(){var t=this;return Z(function*(){t.route.paramMap.pipe((0,G.w)(()=>(0,k.of)({id:"",title:"",body:""}))).subscribe(s=>{t.post=s})})()}onSubmit(t){var o=this;return Z(function*(){try{yield H(o.createMutation.mutate({input:t})),o.t.success("Post successfully created!",{iconTheme:{primary:"#567992",secondary:"#fffaf5"}}),o.router.navigate(["posts"])}catch{o.t.error("There was a problem creating the post, please try again later.",{iconTheme:{primary:"#e6908b",secondary:"#fffaf5"}})}})()}}j.\u0275fac=function(t){return new(t||j)(e.Y36(h.gz),e.Y36(h.F0),e.Y36(C),e.Y36(X.jE))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-create-post"]],decls:5,vars:1,consts:[[1,"text-3xl","font-bold","text-dark"],[1,"border-t","border-gray-200","mt-8","px-4","pt-8"],[1,"bg-white","p-8","mx-auto","shadow-md","rounded"],[3,"initialModel","saveClicked",4,"ngIf"],[3,"initialModel","saveClicked"]],template:function(t,o){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Create Post"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2),e.YNc(4,Ft,1,1,"posts-form",3),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngIf",o.post))},dependencies:[f.O5,A],encapsulation:2});var Zt=a(727);let q,At=1;const D={};function at(n){return n in D&&(delete D[n],!0)}const $t={setImmediate(n){const t=At++;return D[t]=!0,q||(q=Promise.resolve()),q.then(()=>at(t)&&n()),t},clearImmediate(n){at(n)}},{setImmediate:Mt,clearImmediate:Et}=$t,Q={setImmediate(...n){const{delegate:t}=Q;return(t?.setImmediate||Mt)(...n)},clearImmediate(n){const{delegate:t}=Q;return(t?.clearImmediate||Et)(n)},delegate:void 0},lt=new class kt extends st.v{flush(t){this._active=!0;const o=this._scheduled;this._scheduled=void 0;const{actions:s}=this;let i;t=t||s.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=s[0])&&t.id===o&&s.shift());if(this._active=!1,i){for(;(t=s[0])&&t.id===o&&s.shift();)t.unsubscribe();throw i}}}(class Ot extends nt.o{constructor(t,o){super(t,o),this.scheduler=t,this.work=o}requestAsyncId(t,o,s=0){return null!==s&&s>0?super.requestAsyncId(t,o,s):(t.actions.push(this),t._scheduled||(t._scheduled=Q.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,o,s=0){var i;if(null!=s?s>0:this.delay>0)return super.recycleAsyncId(t,o,s);const{actions:r}=t;null!=o&&(null===(i=r[r.length-1])||void 0===i?void 0:i.id)!==o&&(Q.clearImmediate(o),t._scheduled=void 0)}});var jt=a(6063);class K extends E.x{constructor(t=1/0,o=1/0,s=jt.l){super(),this._bufferSize=t,this._windowTime=o,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=o===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,o)}next(t){const{isStopped:o,_buffer:s,_infiniteTimeWindow:i,_timestampProvider:r,_windowTime:l}=this;o||(s.push(t),!i&&s.push(r.now()+l)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const o=this._innerSubscribe(t),{_infiniteTimeWindow:s,_buffer:i}=this,r=i.slice();for(let l=0;l<r.length&&!t.closed;l+=s?1:2)t.next(r[l]);return this._checkFinalizedStatuses(t),o}_trimBuffer(){const{_bufferSize:t,_timestampProvider:o,_buffer:s,_infiniteTimeWindow:i}=this,r=(i?1:2)*t;if(t<1/0&&r<s.length&&s.splice(0,s.length-r),!i){const l=o.now();let d=0;for(let u=1;u<s.length&&s[u]<=l;u+=2)d=u;d&&s.splice(0,d+1)}}}var ct=a(576);function ut(n){return!!n&&(n instanceof B.y||(0,ct.m)(n.lift)&&(0,ct.m)(n.subscribe))}var dt=a(233),V=a(515),Nt=a(2843),zt=a(7159),Jt=a(9841),Ut=a(5363),W=a(8505),pt=a(4671),Dt=a(3269),ft=a(4004),mt=a(262);function Lt(n,t){return n===t}var Bt=a(3099);function R(n){return"function"==typeof n.ngrxOnStoreInit}function tt(n){return"function"==typeof n.ngrxOnStateInit}const Ht=new e.OlP("@ngrx/component-store Initial State");let Xt=(()=>{class n{constructor(o){this.destroySubject$=new K(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new K(1),this.isInitialized=!1,this.state$=this.select(s=>s),this.\u0275hasProvider=!1,o&&this.initState(o),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(o){return s=>{let r,i=!0;const d=(ut(s)?s:(0,k.of)(s)).pipe((0,Ut.Q)(dt.N),(0,W.b)(()=>this.assertStateIsInitialized()),function Qt(...n){const t=(0,Dt.jO)(n);return(0,U.e)((o,s)=>{const i=n.length,r=new Array(i);let l=n.map(()=>!1),d=!1;for(let u=0;u<i;u++)(0,L.Xf)(n[u]).subscribe((0,S.x)(s,p=>{r[u]=p,!d&&!l[u]&&(l[u]=!0,(d=l.every(pt.y))&&(l=null))},ot.Z));o.subscribe((0,S.x)(s,u=>{if(d){const p=[u,...r];s.next(t?t(...p):p)}}))})}(this.stateSubject$),(0,ft.U)(([u,p])=>o(p,u)),(0,W.b)(u=>this.stateSubject$.next(u)),(0,mt.K)(u=>i?(r=u,V.E):(0,Nt._)(u)),O(this.destroy$)).subscribe();if(r)throw r;return i=!1,d}}initState(o){(0,zt.x)([o],dt.N).subscribe(s=>{this.isInitialized=!0,this.stateSubject$.next(s)})}setState(o){"function"!=typeof o?this.initState(o):this.updater(o)()}patchState(o){const s="function"==typeof o?o(this.get()):o;this.updater((i,r)=>({...i,...r}))(s)}get(o){let s;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,Y.q)(1)).subscribe(i=>{s=o?o(i):i}),s}select(...o){const{observablesOrSelectorsObject:s,projector:i,config:r}=function qt(n){const t=Array.from(n);let o={debounce:!1};if(function Kt(n){return typeof n.debounce<"u"}(t[t.length-1])&&(o={...o,...t.pop()}),1===t.length&&"function"!=typeof t[0])return{observablesOrSelectorsObject:t[0],projector:void 0,config:o};const s=t.pop();return{observablesOrSelectorsObject:t,projector:s,config:o}}(o);return(function Vt(n,t){return Array.isArray(n)&&0===n.length&&t}(s,i)?this.stateSubject$:(0,Jt.a)(s)).pipe(r.debounce?function Gt(){return n=>new B.y(t=>{let o,s;const i=new Zt.w0;return i.add(n.subscribe({complete:()=>{o&&t.next(s),t.complete()},error:r=>{t.error(r)},next:r=>{s=r,o||(o=lt.schedule(()=>{t.next(s),o=void 0}),i.add(o))}})),i})}():n=>n,i?(0,ft.U)(d=>s.length>0&&Array.isArray(d)?i(...d):i(d)):n=>n,function Yt(n,t=pt.y){return n=n??Lt,(0,U.e)((o,s)=>{let i,r=!0;o.subscribe((0,S.x)(s,l=>{const d=t(l);(r||!n(i,d))&&(r=!1,i=d,s.next(l))}))})}(),function _t(n,t,o){let s,i=!1;return n&&"object"==typeof n?({bufferSize:s=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:o}=n):s=n??1/0,(0,Bt.B)({connector:()=>new K(s,t,o),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}({refCount:!0,bufferSize:1}),O(this.destroy$))}effect(o){const s=new E.x;return o(s).pipe(O(this.destroy$)).subscribe(),i=>(ut(i)?i:(0,k.of)(i)).pipe(O(this.destroy$)).subscribe(l=>{s.next(l)})}checkProviderForHooks(){lt.schedule(()=>{if((0,e.X6Q)()&&(R(this)||tt(this))&&!this.\u0275hasProvider){const o=[R(this)?"OnStoreInit":"",tt(this)?"OnStateInit":""].filter(s=>s);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${o.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(Ht,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();class v extends Xt{constructor(t,o){super({posts:[]}),this.postsQuery=t,this.postQuery=o,this.posts$=this.select(({posts:s})=>s),this.fetchPosts=this.effect(s=>s.pipe((0,G.w)(()=>this.postsQuery.fetch().pipe(function Wt(n,t,o){return s=>s.pipe((0,W.b)({next:n,complete:o}),(0,mt.K)(i=>(t(i),V.E)))}(i=>this.updateState(i.data.posts.data),i=>(console.error(`Error fetching posts: ${i}`),V.E)))))),this.updateState=this.updater((s,i)=>({posts:i})),this.fetchPosts()}selectPost(t){return this.select(o=>o.posts.find(s=>s.id===t))}}function Rt(n,t){1&n&&(e.TgZ(0,"div",1),e.O4$(),e.TgZ(1,"svg",2)(2,"circle",3),e._UZ(3,"animate",4)(4,"animate",5),e.qZA(),e.TgZ(5,"circle",6),e._UZ(6,"animate",7)(7,"animate",8),e.qZA(),e.TgZ(8,"circle",9),e._UZ(9,"animate",4)(10,"animate",5),e.qZA()()())}v.\u0275fac=function(t){return new(t||v)(e.LFG(T),e.LFG(x))},v.\u0275prov=e.Yz7({token:v,factory:v.\u0275fac});class ${}function te(n,t){if(1&n){const o=e.EpF();e.TgZ(0,"div",4)(1,"posts-form",5),e.NdJ("saveClicked",function(i){e.CHM(o);const r=e.oxw();return e.KtG(r.onSubmit(i))}),e.qZA()()}if(2&n){const o=t.ngIf;e.xp6(1),e.Q6J("initialModel",o)}}$.\u0275fac=function(t){return new(t||$)},$.\u0275cmp=e.Xpm({type:$,selectors:[["app-loader"]],inputs:{active:"active"},decls:1,vars:1,consts:[["class","absolute left-1/2 top-1/2",4,"ngIf"],[1,"absolute","left-1/2","top-1/2"],["width","120","height","30","viewBox","0 0 120 30",1,"fill-primary"],["cx","15","cy","15","r","15"],["attributeName","r","from","15","to","15","begin","0s","dur","0.8s","values","15;9;15","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","1","to","1","begin","0s","dur","0.8s","values","1;.5;1","calcMode","linear","repeatCount","indefinite"],["cx","60","cy","15","r","9","fill-opacity","0.3"],["attributeName","r","from","9","to","9","begin","0s","dur","0.8s","values","9;15;9","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","0.5","to","0.5","begin","0s","dur","0.8s","values",".5;1;.5","calcMode","linear","repeatCount","indefinite"],["cx","105","cy","15","r","15"]],template:function(t,o){1&t&&e.YNc(0,Rt,11,0,"div",0),2&t&&e.Q6J("ngIf",o.active)},dependencies:[f.O5],encapsulation:2});class N{constructor(t,o,s,i,r){this.store=t,this.route=o,this.updateMutation=s,this.t=i,this.router=r}ngOnInit(){this.post$=this.route.paramMap.pipe((0,G.w)(t=>{const o=t.get("id");return o&&this.store.selectPost(o)||(0,k.of)({id:"",title:"",body:""})}))}onSubmit(t){var o=this;return Z(function*(){try{yield H(o.updateMutation.mutate({input:t,id:t.id})),o.t.success("Post successfully updated!",{iconTheme:{primary:"#567992",secondary:"#fffaf5"}}),o.router.navigate(["posts"])}catch{o.t.error("There was a problem updating the post, please try again later.",{iconTheme:{primary:"#e6908b",secondary:"#fffaf5"}})}})()}}N.\u0275fac=function(t){return new(t||N)(e.Y36(v),e.Y36(h.gz),e.Y36(P),e.Y36(X.jE),e.Y36(h.F0))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-edit-post"]],features:[e._Bn([v])],decls:7,vars:6,consts:[[1,"text-3xl","font-bold","text-dark"],[1,"border-t","border-gray-200","mt-8","px-4","pt-8"],[3,"active"],["class","bg-white p-8 mx-auto shadow-md rounded",4,"ngIf"],[1,"bg-white","p-8","mx-auto","shadow-md","rounded"],[3,"initialModel","saveClicked"]],template:function(t,o){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Edit Post"),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"app-loader",2),e.ALo(4,"async"),e.YNc(5,te,2,1,"div",3),e.ALo(6,"async"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("active",!e.lcZ(4,2,o.post$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,4,o.post$)))},dependencies:[f.O5,$,A,f.Ov],encapsulation:2,changeDetection:0});class z{constructor(){this.onClickEdit=new e.vpe,this.onClickDelete=new e.vpe}}function ee(n,t){if(1&n){const o=e.EpF();e.TgZ(0,"post",4),e.NdJ("onClickEdit",function(i){e.CHM(o);const r=e.oxw();return e.KtG(r.routeToEditPost(i))})("onClickDelete",function(i){e.CHM(o);const r=e.oxw();return e.KtG(r.onDeletePost(i))}),e.qZA()}2&n&&e.Q6J("post",t.$implicit)}z.\u0275fac=function(t){return new(t||z)},z.\u0275cmp=e.Xpm({type:z,selectors:[["post"]],inputs:{post:"post"},outputs:{onClickEdit:"onClickEdit",onClickDelete:"onClickDelete"},decls:15,vars:2,consts:[[1,"flex","max-w-xl","flex-col","items-start","justify-between","border-b","border-gray-400","border-opacity-50","pb-4"],[1,"mt-3","text-lg","font-semibold","leading-6","text-dark","line-clamp-1"],[1,"mt-5","text-sm","leading-6","text-gray-600","line-clamp-2","overflow-hidden","text-ellipsis"],[1,"mt-8","flex","items-center","gap-x-4"],[1,"flex","gap-x-4","text-xs"],[1,"txt-btn","text-dark",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-4","h-4"],["d","M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"],[1,"txt-btn","text-primary",3,"click"],["fill-rule","evenodd","d","M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule","evenodd"]],template:function(t,o){1&t&&(e.TgZ(0,"article",0)(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"p",2),e._uU(4),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"p",5),e.NdJ("click",function(){return o.onClickEdit.emit(o.post.id)}),e.O4$(),e.TgZ(8,"svg",6),e._UZ(9,"path",7),e.qZA(),e._uU(10," Edit "),e.qZA(),e.kcU(),e.TgZ(11,"p",8),e.NdJ("click",function(){return o.onClickDelete.emit(o.post.id)}),e.O4$(),e.TgZ(12,"svg",6),e._UZ(13,"path",9),e.qZA(),e._uU(14," Delete "),e.qZA()()()()),2&t&&(e.xp6(2),e.hij(" ",o.post.title," "),e.xp6(2),e.hij(" ",o.post.body," "))},encapsulation:2});class J{constructor(t,o,s,i){this.store=t,this.router=o,this.deleteMutation=s,this.t=i,this.posts$=this.store.posts$}routeToEditPost(t){this.router.navigate([`/posts/edit/${t}`])}onDeletePost(t){var o=this;return Z(function*(){try{yield H(o.deleteMutation.mutate({id:t})),o.t.success("Post successfully deleted!",{iconTheme:{primary:"#567992",secondary:"#fffaf5"}})}catch{o.t.error("There was a problem deleting the post, please try again later.",{iconTheme:{primary:"#e6908b",secondary:"#fffaf5"}})}})()}}J.\u0275fac=function(t){return new(t||J)(e.Y36(v),e.Y36(h.F0),e.Y36(b),e.Y36(X.jE))},J.\u0275cmp=e.Xpm({type:J,selectors:[["app-posts-list"]],features:[e._Bn([v])],decls:7,vars:6,consts:[[1,"text-3xl","font-bold","text-dark"],[3,"active"],[1,"mx-auto","grid","grid-cols-1","gap-x-12","gap-y-12","border-t","border-gray-200","mt-8","pt-8","lg:grid-cols-2"],[3,"post","onClickEdit","onClickDelete",4,"ngFor","ngForOf"],[3,"post","onClickEdit","onClickDelete"]],template:function(t,o){if(1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Posts"),e.qZA(),e._UZ(2,"app-loader",1),e.ALo(3,"async"),e.TgZ(4,"div",2),e.YNc(5,ee,1,1,"post",3),e.ALo(6,"async"),e.qZA()),2&t){let s;e.xp6(2),e.Q6J("active",!(null!=(s=e.lcZ(3,2,o.posts$))&&s.length)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(6,4,o.posts$))}},dependencies:[f.sg,$,z,f.Ov],encapsulation:2,changeDetection:0});const oe=[{path:"",component:J},{path:"create",component:j},{path:"edit/:id",component:N}];class M{}M.\u0275fac=function(t){return new(t||M)},M.\u0275mod=e.oAB({type:M}),M.\u0275inj=e.cJS({imports:[f.ez,h.Bz.forChild(oe),c.u5,c.UX,I,F]})}}]);